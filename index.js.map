{"version":3,"file":"index.js","mappings":"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","sources":["webpack://my-webpack-project/./src/pages/AbstractView.ts","webpack://my-webpack-project/./src/utils/RouterHelper.ts","webpack://my-webpack-project/./src/utils/Validator.ts","webpack://my-webpack-project/./src/pages/Basket/ModalWindow.ts","webpack://my-webpack-project/./src/pages/Basket/htmlModal.ts","webpack://my-webpack-project/./src/pages/Basket/promocodes.ts","webpack://my-webpack-project/./src/pages/Basket/PromoCode.ts","webpack://my-webpack-project/./src/pages/Basket/Cart.ts","webpack://my-webpack-project/./src/pages/Basket/htmlCart.ts","webpack://my-webpack-project/./src/utils/Storage.ts","webpack://my-webpack-project/./src/components/CartComponent.ts","webpack://my-webpack-project/./src/components/Listeners/PhotoListener.ts","webpack://my-webpack-project/./src/pages/ProductDetails/ProductDetails.ts","webpack://my-webpack-project/./src/components/ProductDetailsCard.ts","webpack://my-webpack-project/./src/pages/404/404.ts","webpack://my-webpack-project/./src/components/Sort/Sort.ts","webpack://my-webpack-project/./src/components/Listeners/PriceFilterSlider.ts","webpack://my-webpack-project/./src/components/Listeners/SearchListener.ts","webpack://my-webpack-project/./src/components/Listeners/StockFilterSlider.ts","webpack://my-webpack-project/./src/components/Listeners/UrlCopyListener.ts","webpack://my-webpack-project/./src/pages/Home/Home.ts","webpack://my-webpack-project/./src/components/ProductCards.ts","webpack://my-webpack-project/./src/components/Listeners/AllListener.ts","webpack://my-webpack-project/./src/components/Listeners/FilterListener.ts","webpack://my-webpack-project/./src/pages/Home/htmlData.ts","webpack://my-webpack-project/./src/utils/ProductsData.ts","webpack://my-webpack-project/./src/components/Header.ts","webpack://my-webpack-project/./src/index.ts","webpack://my-webpack-project/./src/components/App.ts","webpack://my-webpack-project/./src/utils/Router.ts"],"sourcesContent":["class AbstractView {\r\n    constructor(params) {\r\n        this.params = params;\r\n    }\r\n    setTitle(title) {\r\n        document.title = title;\r\n    }\r\n    render(root, data) { }\r\n}\r\nexport { AbstractView };\r\n","class RouterHelper {\r\n}\r\nRouterHelper.checkId = (path) => {\r\n    const pathArray = path.split('/');\r\n    if (pathArray.length !== 2) {\r\n        return false;\r\n    }\r\n    const id = Number(pathArray.slice(-1).join(''));\r\n    return id;\r\n};\r\nRouterHelper.setFilter = (path) => {\r\n    if (path && path.includes('?')) {\r\n        const filtersString = path.split('?')[1].replace('/', '');\r\n        const filters = {};\r\n        filtersString.split('&').forEach((elem) => {\r\n            const [key, valuesString] = elem.split('=');\r\n            const values = valuesString.split('+');\r\n            filters[key] = values;\r\n        });\r\n        return filters;\r\n    }\r\n    return {};\r\n};\r\nexport default RouterHelper;\r\n","export default class Validator {\r\n    static isValidName(name) {\r\n        const nameArray = name.split(' ');\r\n        if (nameArray.length < 2)\r\n            return false;\r\n        return (nameArray.filter((part) => part.length > 2).length === nameArray.length);\r\n    }\r\n    static isValidPhone(number) {\r\n        const re = /^([+ ]{2}[0-9]{9,14})?$/;\r\n        return String(number).length > 0 && re.test(String(number));\r\n    }\r\n    static isValidAddress(address) {\r\n        const addressArray = address.split(' ');\r\n        if (addressArray.length < 3)\r\n            return false;\r\n        return (addressArray.filter((part) => part.length > 3).length ===\r\n            addressArray.length);\r\n    }\r\n    static isValidEmail(email) {\r\n        const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        return re.test(String(email).toLowerCase());\r\n    }\r\n    static isValidCardNumber(cardNumber) {\r\n        const re = /^([0-9]{4}[ ]{1}[0-9]{4}[ ]{1}[0-9]{4}[ ]{1}[0-9]{4})?$/;\r\n        return (String(cardNumber).length > 0 &&\r\n            re.test(String(cardNumber)) &&\r\n            this.isCreditCardNumber(cardNumber));\r\n    }\r\n    static isValidValidThru(validThru) {\r\n        const validThruArray = validThru.split('/');\r\n        if (validThruArray.length === 1)\r\n            return false;\r\n        if (Number(validThruArray[0]) > 12)\r\n            return false;\r\n        return (validThruArray.filter((part) => part.length === 2).length ===\r\n            validThruArray.length);\r\n    }\r\n    static isValidCvv(cvv) {\r\n        return cvv.length === 3;\r\n    }\r\n    static isCreditCardNumber(ccn) {\r\n        const cnnArr = ccn\r\n            .toString()\r\n            .split('')\r\n            .filter((n) => n !== ' ');\r\n        const result = cnnArr.map((item, i) => {\r\n            let itemNumber = Number(item);\r\n            if ((i % 2 === 0 && cnnArr.length % 2 === 0) ||\r\n                (i % 2 && cnnArr.length % 2)) {\r\n                return itemNumber * 2 > 9 ? itemNumber * 2 - 9 : itemNumber * 2;\r\n            }\r\n            return Number(item);\r\n        });\r\n        return result.reduce((prev, curr) => prev + curr, 0) % 10 === 0;\r\n    }\r\n}\r\n","import { modalLayout } from './htmlModal';\r\nimport Validator from '../../utils/Validator';\r\nexport default class Modal {\r\n    constructor() {\r\n        this.root = document.getElementById('root');\r\n    }\r\n    listener(data) {\r\n        let modal;\r\n        const buyBtn = document.querySelector('.buy__order');\r\n        buyBtn.addEventListener('click', () => {\r\n            const hash = location.hash;\r\n            if (hash !== '#cart') {\r\n                this.buyFromProductDetails(data);\r\n            }\r\n            modal = this.createModal();\r\n            const form = document.querySelector('.form');\r\n            const cardNumber = form.querySelector('.input-card-number'), validThru = form.querySelector('.input-valid-thru'), inputName = form.querySelector('.input-name'), inputNumber = form.querySelector('.input-number'), inputAddress = form.querySelector('.input-address'), inputEmail = form.querySelector('.input-email'), inputValidThru = form.querySelector('.input-valid-thru'), inputCvv = form.querySelector('.input-cvv');\r\n            form.addEventListener('submit', (event) => {\r\n                event.preventDefault();\r\n                return this.isValidForm(inputName, inputNumber, inputAddress, inputEmail, cardNumber, inputCvv, inputValidThru);\r\n            });\r\n            if (inputName) {\r\n                inputName.addEventListener('blur', (e) => {\r\n                    this.validName(inputName);\r\n                });\r\n            }\r\n            if (inputNumber) {\r\n                inputNumber.addEventListener('focus', function (e) {\r\n                    const currentTarget = e.target;\r\n                    const currentValue = currentTarget.value;\r\n                    e.target.value = `+ ${currentValue.replace(/[^\\d.]/g, '')}`;\r\n                    // currentTarget.value = `+ ${currentValue.replace(/[^\\d.]/g, '')}`;\r\n                });\r\n            }\r\n            if (inputNumber) {\r\n                inputNumber.addEventListener('blur', (e) => {\r\n                    this.validPhone(inputNumber);\r\n                });\r\n            }\r\n            if (inputAddress) {\r\n                inputAddress.addEventListener('blur', (e) => {\r\n                    this.validAddress(inputAddress);\r\n                });\r\n            }\r\n            if (inputEmail) {\r\n                inputEmail.addEventListener('blur', (e) => {\r\n                    this.validEmail(inputEmail);\r\n                });\r\n            }\r\n            if (cardNumber) {\r\n                cardNumber.addEventListener('blur', (e) => {\r\n                    this.validCardNumber(cardNumber);\r\n                });\r\n            }\r\n            if (cardNumber) {\r\n                cardNumber.addEventListener('input', (e) => {\r\n                    this.cardNumberHandler(e, cardNumber);\r\n                });\r\n            }\r\n            if (inputValidThru) {\r\n                inputValidThru.addEventListener('input', (e) => {\r\n                    this.validThruHandler(e, validThru);\r\n                });\r\n            }\r\n            if (inputValidThru) {\r\n                inputValidThru.addEventListener('blur', () => {\r\n                    this.validThru(validThru);\r\n                });\r\n            }\r\n            if (inputCvv) {\r\n                inputCvv.addEventListener('input', (e) => {\r\n                    this.cvvHandler(e, inputCvv);\r\n                });\r\n            }\r\n            if (inputCvv) {\r\n                inputCvv.addEventListener('blur', (e) => {\r\n                    this.validCvv(inputCvv);\r\n                });\r\n            }\r\n            if (inputValidThru) {\r\n                inputValidThru.addEventListener('blur', () => {\r\n                    if (!Validator.isValidValidThru(inputValidThru.value)) {\r\n                        inputValidThru.classList.add('error');\r\n                    }\r\n                    else {\r\n                        inputValidThru.classList.remove('error');\r\n                    }\r\n                });\r\n            }\r\n            if (inputCvv) {\r\n                inputCvv.addEventListener('blur', () => {\r\n                    if (!Validator.isValidCvv(inputCvv.value)) {\r\n                        inputCvv.classList.add('error');\r\n                    }\r\n                    else {\r\n                        inputCvv.classList.remove('error');\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        window.addEventListener('click', (e) => {\r\n            const currentTarget = e.target;\r\n            if (currentTarget.className === 'modal') {\r\n                currentTarget.remove();\r\n            }\r\n        });\r\n    }\r\n    createModal() {\r\n        let modal = document.createElement('div');\r\n        modal.classList.add('modal');\r\n        modal.innerHTML = modalLayout;\r\n        this.root.after(modal);\r\n        return modal;\r\n    }\r\n    isValidForm(inputName, inputNumber, inputAddress, inputEmail, inputCardNumber, inputCvv, inputValidThru) {\r\n        let isValid = true;\r\n        this.validName(inputName);\r\n        this.validPhone(inputNumber);\r\n        this.validEmail(inputEmail);\r\n        this.validAddress(inputAddress);\r\n        this.validCardNumber(inputCardNumber);\r\n        this.validThru(inputValidThru);\r\n        this.validCvv(inputCvv);\r\n        isValid = document.querySelectorAll('.error').length === 0;\r\n        if (isValid) {\r\n            localStorage.clear();\r\n            window.location.hash = '';\r\n            const modalContent = document.querySelector('.modal-content');\r\n            modalContent.innerHTML = '';\r\n            modalContent.style.top = '25%';\r\n            modalContent.innerHTML =\r\n                '<p class=\"info\"> Thank you for your order! </p><p class=\"info\"> Click anywhere to continue.</p>';\r\n        }\r\n        return isValid;\r\n    }\r\n    cardNumberHandler(e, cardNumber) {\r\n        // при удалении символов сразу возврат\r\n        if (e instanceof InputEvent) {\r\n            if (!e.data)\r\n                return;\r\n        }\r\n        // сами не можем вводить пробелы\r\n        if (e instanceof InputEvent) {\r\n            if (e.data === ' ') {\r\n                cardNumber.value = cardNumber.value.slice(0, -1);\r\n                return;\r\n            }\r\n        }\r\n        // меняем все символы в строке на '' кроме цифр и пробелов\r\n        cardNumber.value = cardNumber.value.replace(/[^0-9\\s]+/g, '');\r\n        if (cardNumber.value.replace(/\\s/g, '').length % 4 === 0 &&\r\n            cardNumber.value.length > 0) {\r\n            cardNumber.value += ' ';\r\n        }\r\n        // если в строке есть 16 цифр запрещаем ввод\r\n        if (cardNumber.value.replace(/\\s/g, '').length > 15) {\r\n            cardNumber.value = cardNumber.value.slice(0, -1);\r\n        }\r\n        let bankCardImg = document.querySelector('.bankcard-img');\r\n        if (Number(cardNumber.value[0]) === 4) {\r\n            bankCardImg.src = './assets/visa.png';\r\n        }\r\n        else if (Number(cardNumber.value[0]) === 5) {\r\n            bankCardImg.src = './assets/masterCard.png';\r\n        }\r\n        else if (Number(cardNumber.value[0]) === 6) {\r\n            bankCardImg.src = './assets/maestro.png';\r\n        }\r\n        else {\r\n            bankCardImg.src = './assets/bankCard.png';\r\n        }\r\n    }\r\n    validEmail(input) {\r\n        if (!Validator.isValidEmail(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-email').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-email').classList.remove('show');\r\n        }\r\n    }\r\n    validPhone(input) {\r\n        if (!Validator.isValidPhone(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-number').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-number').classList.remove('show');\r\n        }\r\n    }\r\n    validName(input) {\r\n        if (!Validator.isValidName(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-name').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-name').classList.remove('show');\r\n        }\r\n    }\r\n    validAddress(input) {\r\n        if (!Validator.isValidAddress(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-address').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-address').classList.remove('show');\r\n        }\r\n    }\r\n    validCardNumber(input) {\r\n        if (!Validator.isValidCardNumber(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-card-number').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-card-number').classList.remove('show');\r\n        }\r\n    }\r\n    validThru(input) {\r\n        if (!Validator.isValidValidThru(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-thru').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-thru').classList.remove('show');\r\n        }\r\n    }\r\n    validCvv(input) {\r\n        if (!Validator.isValidCvv(input.value)) {\r\n            input.classList.add('error');\r\n            document.querySelector('.error-cvv').classList.add('show');\r\n        }\r\n        else {\r\n            input.classList.remove('error');\r\n            document.querySelector('.error-cvv').classList.remove('show');\r\n        }\r\n    }\r\n    validThruHandler(e, validThru) {\r\n        if (e instanceof InputEvent) {\r\n            if (!e.data)\r\n                return;\r\n        }\r\n        if (e instanceof InputEvent) {\r\n            if (e.data === '/' || e.data === ' ') {\r\n                validThru.value = validThru.value.slice(0, -1);\r\n                return;\r\n            }\r\n        }\r\n        validThru.value = validThru.value.replace(/[^0-9\\/]+/g, '');\r\n        if (validThru.value.replace(/\\//g, '').length % 2 === 0 &&\r\n            validThru.value.length > 0) {\r\n            validThru.value += '/';\r\n        }\r\n        if (validThru.value.replace(/\\//g, '').length > 3) {\r\n            validThru.value = validThru.value.slice(0, -1);\r\n        }\r\n    }\r\n    cvvHandler(e, cvv) {\r\n        if (e instanceof InputEvent) {\r\n            if (!e.data)\r\n                return;\r\n        }\r\n        cvv.value = cvv.value.replace(/[^0-9]+/g, '');\r\n        if (cvv.value.length > 3) {\r\n            cvv.value = cvv.value.slice(0, -1);\r\n        }\r\n    }\r\n    buyFromProductDetails(data) {\r\n        const currentId = location.hash.split('/').slice(-1)[0];\r\n        window.location.hash = '#cart';\r\n        const itemsInCart = JSON.parse(localStorage.getItem('cart'));\r\n        if (itemsInCart) {\r\n            if (itemsInCart.inCart\r\n                .map((item) => item.id)\r\n                .includes(Number(currentId))) {\r\n            }\r\n            else {\r\n                const previousProducts = JSON.parse(localStorage.getItem('cart')).inCart || [];\r\n                if (data) {\r\n                    const currentProduct = data.find((item) => item.id === Number(currentId));\r\n                    currentProduct ? (currentProduct.count = 1) : null;\r\n                    previousProducts.push(currentProduct);\r\n                    const newData = JSON.stringify({ ['inCart']: previousProducts });\r\n                    localStorage.setItem('cart', newData);\r\n                }\r\n            }\r\n        }\r\n        {\r\n        }\r\n    }\r\n}\r\n","export const modalLayout = `\n<div class=\"modal-content\">\n    <form class=\"form\" action=\"\" novalidate>\n        <p class=\"form-title personal-title\">Personal Data</p>\n        <div class=\"form__group\">\n            <input type=\"text\" class=\"input input-name\" name=\"fullName\" placeholder=\"Name\">\n            <div class=\"error-name\">Please enter a valid name (NAME SURNAME) </div>\n        </div>\n        <div class=\"form__group\">\n            <input type=\"tel\" minlength=\"9\"\n            maxlength=\"14\" class=\"input input-number\" name=\"number\" placeholder=\"Phone number\">\n            <div class=\"error-number\">Please enter a valid phone number (phone number length minimum 9 and maximum 14). </div>\n        </div>\n        <div class=\"form__group\">\n            <input type=\"text\" class=\"input input-address\" name=\"address\" placeholder=\"Delivery address\">\n            <div class=\"error-address\">Please enter a valid address (Main info: Country Region City Street 45/12) </div>\n        </div>\n        <div class=\"form__group\">\n            <input type=\"email\" class=\"input input-email\" name=\"email\" placeholder=\"E-mail\">\n            <div class=\"error-email\">Please enter a valid email (name@test.com) </div>\n        </div>\n        <p class=\"form-title card-title\">Card data</p>\n        <div class=\"form__group card-number-wrapper\">\n            <input type=\"text\" class=\"input input-card-number\" name=\"card-number\" placeholder=\"Card number\">\n            <img src=\"./assets/bankCard.png\" class=\"bankcard-img\" width=\"80px\" height=\"50px\" alt=\"bankCard\">\n             </div>\n         <div class=\"error-card-number\">Please enter a valid payment card number. </div>\n        <div class=\"card-data-wrapper\">\n        <div>\n        <input type=\"text\" class=\"input input-valid-thru\" name=\"valid-thru\" placeholder=\"valid thru\">\n            <div class=\"error-thru\">MM/YY </div>\n            </div>\n            <div>\n            <input type=\"text\" class=\"input input-cvv\" name=\"cvv\" placeholder=\"CVV\">\n            <div class=\"error-cvv\">XXX</div>\n            </div>   \n        </div>\n        <button class=\"sumbit-btn\" type=\"submit\">\n            Confirm\n        </button>\n    </form>\n</div>\n`;\r\n","// ключ - название промокода, значение - скидка в процентах\r\nexport const promocodes = {\r\n    rss: 10,\r\n    epam: 15,\r\n    develop: 10,\r\n};\r\n","import { promocodes } from './promocodes';\r\nexport default class PromoCode {\r\n    constructor() {\r\n        this.couponInput = document.querySelector('.coupon');\r\n        this.appliedPromo = new Set(JSON.parse(localStorage.getItem('coupons')) || []);\r\n    }\r\n    listener() {\r\n        this.createList();\r\n        this.couponInput.addEventListener('input', () => {\r\n            for (let promo in promocodes) {\r\n                if (this.couponInput.value.toLowerCase() === promo) {\r\n                    this.createPromo(promo);\r\n                }\r\n                else {\r\n                    this.deletePromo(promo);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    createPromo(promo) {\r\n        let wrapper = document.createElement('div'), promoElement = document.createElement('div'), applyPromoBtn = document.createElement('button');\r\n        wrapper.classList.add('wrapper');\r\n        promoElement.classList.add('find-promo');\r\n        applyPromoBtn.classList.add('apply-promo');\r\n        promoElement.textContent = `${promo} - ${promocodes[promo]}%`;\r\n        applyPromoBtn.textContent = `add`;\r\n        applyPromoBtn.addEventListener('click', () => {\r\n            this.appliedPromo.add(promo);\r\n            let array = JSON.parse(localStorage.getItem('coupons')) || [];\r\n            array.push(promo);\r\n            localStorage.setItem('coupons', JSON.stringify(array));\r\n            this.createList();\r\n        });\r\n        wrapper.append(promoElement, applyPromoBtn);\r\n        const findCoupon = document.querySelector('.find-coupon');\r\n        if (findCoupon) {\r\n            findCoupon.append(wrapper);\r\n        }\r\n    }\r\n    deletePromo(promo) {\r\n        let findCouponsWrapper = document.querySelector('.find-coupon');\r\n        let findCoupon = findCouponsWrapper.querySelector('.find-promo');\r\n        if (findCoupon && findCoupon.textContent.startsWith(promo)) {\r\n            findCoupon.closest('.wrapper').remove();\r\n        }\r\n    }\r\n    createList() {\r\n        let appliedCoupons = document.querySelector('.applied-coupons');\r\n        let promos = document.createElement('div');\r\n        promos.classList.add('promos');\r\n        let title = document.createElement('div');\r\n        appliedCoupons.innerHTML = '';\r\n        if (this.appliedPromo.size > 0) {\r\n            title.classList.add('applied-promo-title');\r\n            title.textContent = 'Applied promo';\r\n            appliedCoupons.append(title);\r\n        }\r\n        const array = Array.from(this.appliedPromo);\r\n        array.forEach((promo) => {\r\n            let wrapper = document.createElement('div');\r\n            let coupon = document.createElement('div');\r\n            let drop = document.createElement('button');\r\n            wrapper.classList.add('promo-drop__wrapper');\r\n            coupon.classList.add('promo');\r\n            drop.classList.add('drop');\r\n            coupon.textContent = `${promo} - ${promocodes[promo]}%`;\r\n            drop.textContent = 'drop';\r\n            drop.addEventListener('click', () => {\r\n                this.appliedPromo.delete(promo);\r\n                let array = JSON.parse(localStorage.getItem('coupons')) || [];\r\n                let newArray = array.filter((item) => item !== promo);\r\n                localStorage.setItem('coupons', JSON.stringify(newArray));\r\n                this.createList();\r\n            });\r\n            wrapper.append(coupon, drop);\r\n            promos.append(wrapper);\r\n        });\r\n        appliedCoupons.append(promos);\r\n        this.setNewPrice();\r\n    }\r\n    setNewPrice() {\r\n        const discountPrice = document.querySelector('.discount-price');\r\n        const buyTotalAmount = document.querySelector('.buy__total-amount');\r\n        if (this.appliedPromo.size) {\r\n            buyTotalAmount.classList.add('crossOut');\r\n            const arrayPromo = Array.from(this.appliedPromo);\r\n            const percentAmount = arrayPromo.reduce((total, promo) => {\r\n                return (total += promocodes[promo]);\r\n            }, 0);\r\n            discountPrice.textContent = `Total:   $ ${(+buyTotalAmount.textContent.slice(2) *\r\n                (1 - percentAmount / 100)).toFixed(2)}`;\r\n        }\r\n        else {\r\n            discountPrice.innerHTML = '';\r\n            buyTotalAmount.classList.remove('crossOut');\r\n        }\r\n    }\r\n}\r\n","import CartComponent from '../../components/CartComponent';\r\nimport { AbstractView } from '../AbstractView';\r\nimport { cartLayout } from './htmlCart';\r\nimport Modal from './ModalWindow';\r\nimport PromoCode from './PromoCode';\r\nclass Cart extends AbstractView {\r\n    constructor(params) {\r\n        super(params);\r\n        this.params = params;\r\n        this.setTitle('Basket');\r\n        this.cart = new CartComponent();\r\n    }\r\n    fillCartList() {\r\n        const currentCart = this.cart.getCart();\r\n        const orderEl = document.querySelector('.order');\r\n        if (currentCart && currentCart.length > 0) {\r\n            this.cart.pagination();\r\n            const limit = document.querySelector('#limit');\r\n            const limitValue = limit ? Number(limit.value) : 4;\r\n            const currentPage = document.querySelector('.pagination .active');\r\n            currentPage ? currentPage.textContent : null;\r\n            const start = Number(currentPage) > 1\r\n                ? limitValue * Number(currentPage) - limitValue\r\n                : 0;\r\n            let lastIndex = Number(currentPage) * limitValue - limitValue;\r\n            const end = Number(start) + limitValue;\r\n            const dataToShow = currentCart.slice(start, end);\r\n            this.cart.setCurrentAmountHeader();\r\n            const cartWrapper = document.querySelector('.basket-list');\r\n            orderEl ? orderEl.classList.remove('hidden') : null;\r\n            const content = dataToShow.map((item, i) => `<li class=\"basket-list-item\">\n          <div  class=\"basket-item-container\">\n          <div class=\"basket-item-number\">\n          <p >${currentPage && Number(currentPage) > 1 ? lastIndex : i + 1}.</p></div>\n           <div id=${item.id}  class = \"basket-item-photo\" style = background-image:url('${item.thumbnail}') ></div>\n            <div class=\"basket-item-description\">\n              <p>${item.title} (${item.category[0].toUpperCase() +\r\n                item.category.slice(1, item.category.length)})</p>\n              <p>${item.description}</p>\n              <p>Rating: ${item.rating}</p>\n            </div>\n            <div class=\"basket-item-price\" >\n              <p>$ ${item.price}.00</p>\n            </div>\n            <div id =${item.id} class=\"basket-item-count\">\n              <button class=\"basket-item-add\">+</button>\n            <div class=\"item-count-info\">\n              <p class=\"basket-item-stock\">Stock: ${item.stock}</p>\n              <p>${item.count}</p>\n            </div>  \n              <button class=\"basket-item-remove\">-</button>\n            </div>\n            <div class=\"basket-item-total\">\n              <p>$${item.count ? item.count * item.price : 0}.00</p>\n            </div>\n          </div>\n        </li>`);\r\n            cartWrapper && content.length > 0\r\n                ? (cartWrapper.innerHTML = content.reduce((a, b) => a + b))\r\n                : null;\r\n        }\r\n        else {\r\n            const cartSection = document.querySelector('.basket-products');\r\n            const textForEmpty = document.createElement('div');\r\n            textForEmpty.classList.add('basket-empty');\r\n            textForEmpty.textContent = 'Cart is empty';\r\n            if (cartSection) {\r\n                cartSection.innerHTML = '';\r\n                cartSection.append(textForEmpty);\r\n            }\r\n            orderEl ? orderEl.classList.add('hidden') : null;\r\n        }\r\n        this.cart.listenCount();\r\n        this.cart.listenCardDetails();\r\n    }\r\n    render(root, data) {\r\n        root.innerHTML = cartLayout;\r\n        this.fillCartList();\r\n        this.afterRootRender(data);\r\n    }\r\n    afterRootRender(data) {\r\n        const modalWindow = new Modal();\r\n        data ? modalWindow.listener(data.products) : modalWindow.listener();\r\n        const promo = new PromoCode();\r\n        promo.listener();\r\n    }\r\n}\r\nexport { Cart };\r\n","export const cartLayout = `\n<section class=\"basket-page\">\n    <div class=\"container\">\n        <h2 class=\"basket__title\">Cart</h2>\n        <div class=\"pagination-wrapper\">\n        <div class=\"pagination-limit\"></div>\n        <div class=\"pagination\"></div>\n        </div>\n        <div class=\"basket-products\">\n        <div class=\"basket-products__name\"><h4>Product</h4></div>\n        <div class=\"basket-products__price\"><h4>Price</h4></div>\n        <div class=\"basket-products__amount\"><h4>Amount</h4></div>\n        <div class=\"basket-products__total\"><h4>Total</h4></div>\n        </div>\n        <div ><ul class=\"basket-list\"></ul></div>\n        <div class=\"order\">\n            <div class=\"coupon__wrapper\">\n               <input type=\"text\" class=\"coupon\" placeholder=\"promo code (rss, epam)\">\n               <div class=\"find-coupon\"></div>\n               <div class=\"applied-coupons\"></div>\n            </div>\n            <div class=\"buy__wrapper\">\n              <div class=\"buy__total\"><div><p class=\"basket-amount\"></p>\n            </div>\n                  <p>Total:&nbsp;&nbsp;</p>\n                    <p class=\"buy__total-amount\"></p>\n                    <div class=\"discount-price\"></div>\n                </div>\n                <button class=\"buy__order\">BUY NOW</button>\n            </div>\n        <div>\n    </div>\n<section>`;\r\n","class Storage {\r\n    constructor(name) {\r\n        this.store = name;\r\n        this.obj = this.getAll();\r\n    }\r\n    set(key, value) {\r\n        const data = this.obj;\r\n        data[key] = value;\r\n        const newData = JSON.stringify(data);\r\n        localStorage.setItem(this.store, newData);\r\n    }\r\n    get(key) {\r\n        return this.obj[key];\r\n    }\r\n    drop(key) {\r\n        this.obj[key] && this.obj[key].length > 0\r\n            ? (this.obj[key].length = 0)\r\n            : this.obj[key];\r\n        const data = this.obj;\r\n        const newData = JSON.stringify(data);\r\n        localStorage.setItem(this.store, newData);\r\n    }\r\n    getAll() {\r\n        const data = localStorage.getItem(this.store);\r\n        return data ? JSON.parse(data) : {};\r\n    }\r\n    dropAll() {\r\n        localStorage.clear();\r\n    }\r\n}\r\nexport default Storage;\r\n","import { Cart } from '../pages/Basket/Cart';\r\nimport RouterHelper from '../utils/RouterHelper';\r\nimport Storage from '../utils/Storage';\r\nexport default class CartComponent {\r\n    constructor() {\r\n        this.storage = new Storage('cart');\r\n        this.cartData = this.storage.get('inCart') || [];\r\n    }\r\n    listenCart(allData) {\r\n        this.setCurrentAmountHeader();\r\n        const allProducts = document.querySelector('.products-items');\r\n        const productDetail = document.querySelector('.product-wrapper');\r\n        const currentContent = allProducts ? allProducts : productDetail;\r\n        if (currentContent) {\r\n            currentContent.addEventListener('click', (e) => {\r\n                this.cartData = this.storage.get('inCart') || [];\r\n                const currentId = e.target instanceof HTMLElement ? Number(e.target.id) : '';\r\n                const checkedProduct = allData.find((item) => item.id === currentId);\r\n                if (checkedProduct &&\r\n                    e.target instanceof HTMLElement &&\r\n                    e.target.className === 'card__buttons-add') {\r\n                    checkedProduct.count = 1;\r\n                    this.cartData.push(checkedProduct);\r\n                    this.storage.set('inCart', this.cartData);\r\n                    this.toggleButton(e.target, e.target.id, 'Remove from cart');\r\n                }\r\n                else if (e.target instanceof HTMLButtonElement &&\r\n                    e.target.className === 'card__buttons-remove' &&\r\n                    checkedProduct) {\r\n                    checkedProduct.count = 0;\r\n                    const id = e.target.id;\r\n                    const newData = this.cartData.filter((item) => String(item.id) !== id);\r\n                    this.storage.set('inCart', newData);\r\n                    this.toggleButton(e.target, e.target.id, 'Add to cart');\r\n                }\r\n                this.setCurrentAmountHeader();\r\n            });\r\n        }\r\n    }\r\n    listenCount() {\r\n        const cartList = document.querySelector('.basket-list');\r\n        if (cartList) {\r\n            cartList.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement &&\r\n                    e.target.classList.contains('basket-item-add')) {\r\n                    const closestEl = e.target.closest('div');\r\n                    if (closestEl) {\r\n                        const currentId = Number(closestEl.id);\r\n                        this.cartData.forEach((item) => item.id === currentId &&\r\n                            item.count &&\r\n                            item.stock >= item.count + 1\r\n                            ? (item.count += 1)\r\n                            : item);\r\n                    }\r\n                    this.storage.set('inCart', this.cartData);\r\n                }\r\n                else if (e.target instanceof HTMLElement &&\r\n                    e.target.classList.contains('basket-item-remove')) {\r\n                    const closestEl = e.target.closest('div');\r\n                    if (closestEl) {\r\n                        const currentId = Number(closestEl.id);\r\n                        this.cartData.forEach((item) => {\r\n                            if (item.id === currentId && item.count && item.count > 1) {\r\n                                item.count -= 1;\r\n                                this.storage.set('inCart', this.cartData);\r\n                            }\r\n                            else if (item.id === currentId && item.count === 1) {\r\n                                const newData = this.cartData.filter((prod) => prod.id !== item.id);\r\n                                this.storage.set('inCart', newData);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                const view = new Cart('#cart');\r\n                const root = document.querySelector('#root');\r\n                root ? view.render(root) : null;\r\n            });\r\n        }\r\n        const totalAmount = document.querySelector('.buy__total-amount');\r\n        if (totalAmount) {\r\n            totalAmount.textContent = `$ ${this.getTotalAmount()}.00`;\r\n        }\r\n        this.setCurrentAmountHeader();\r\n    }\r\n    setCurrentAmountHeader() {\r\n        const totalAmount = this.getTotalAmount() || 0;\r\n        const amountEl = document.querySelector('#totalAmount');\r\n        if (amountEl) {\r\n            amountEl.textContent = totalAmount\r\n                ? `Total: $ ${totalAmount}`\r\n                : 'Total: $ 0';\r\n        }\r\n        this.setProductsInCart();\r\n    }\r\n    setProductsInCart() {\r\n        const cartHeader = document.querySelector('.basket-count');\r\n        const basketAmount = document.querySelector('.basket-amount');\r\n        const productInCart = this.cartData && this.cartData.length > 0\r\n            ? this.cartData\r\n                .map((item) => item.count)\r\n                .reduce((a, b) => {\r\n                if (a && b) {\r\n                    return a + b;\r\n                }\r\n            })\r\n            : 0;\r\n        if (productInCart && productInCart > 0 && cartHeader) {\r\n            cartHeader.style.display = 'block';\r\n            cartHeader.textContent = `${productInCart}`;\r\n            basketAmount\r\n                ? (basketAmount.textContent = `Products: ${productInCart}`)\r\n                : null;\r\n        }\r\n        else {\r\n            cartHeader ? (cartHeader.style.display = 'none') : null;\r\n        }\r\n    }\r\n    listenCardDetails() {\r\n        const productsList = document.querySelector('.basket-list');\r\n        if (productsList) {\r\n            productsList.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement &&\r\n                    e.target.classList.contains('basket-item-photo')) {\r\n                    const id = e.target.id;\r\n                    window.location.hash = `#product-details/${id}`;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    getTotalAmount() {\r\n        this.cartData = this.storage.get('inCart') || [];\r\n        const totalAmount = this.cartData && this.cartData.length > 0\r\n            ? this.cartData\r\n                .map((item) => {\r\n                if (item.count) {\r\n                    return item.price * item.count;\r\n                }\r\n            })\r\n                .reduce((prev, curr) => {\r\n                if (prev && curr) {\r\n                    return prev + curr;\r\n                }\r\n            })\r\n            : 0;\r\n        return totalAmount;\r\n    }\r\n    getCart() {\r\n        return this.storage.get('inCart') ? this.storage.get('inCart') : [];\r\n    }\r\n    toggleButton(target, id, text) {\r\n        const addedItem = document.querySelector(`.card__item.id-${id}`);\r\n        target.textContent = `${text}`;\r\n        target.classList.toggle('card__buttons-remove');\r\n        target.classList.toggle('card__buttons-add');\r\n        addedItem ? addedItem.classList.toggle('in-cart') : null;\r\n    }\r\n    pagination() {\r\n        const currentLimit = this.storage.get('limit') && this.storage.get('limit')[0]\r\n            ? this.storage.get('limit')[0]\r\n            : 4;\r\n        let currentPage = this.storage.get('page') && this.storage.get('page')[0]\r\n            ? this.storage.get('page')[0]\r\n            : 1;\r\n        const limitElement = document.querySelector('.pagination-limit');\r\n        if (limitElement) {\r\n            limitElement.innerHTML = `<label for=\"limit\">Limit: </label>\r\n        <input id=\"limit\" type=\"number\" value=\"4\" min=\"1\"/>`;\r\n        }\r\n        const inputLimit = document.querySelector('#limit');\r\n        const paginator = document.querySelector('.pagination');\r\n        if (inputLimit && paginator) {\r\n            inputLimit.value = `${currentLimit}`;\r\n            const countItems = this.getCart().length;\r\n            const itemsOnPage = inputLimit.value;\r\n            const countPages = Math.ceil(countItems / Number(itemsOnPage));\r\n            if (countPages < currentPage) {\r\n                currentPage = String(countPages);\r\n                this.storage.set('page', [currentPage]);\r\n            }\r\n            let page = '';\r\n            for (let i = 0; i < countPages; i++) {\r\n                page += `<div id=\"page${i + 1}\">${i + 1}</div>`;\r\n            }\r\n            paginator.innerHTML = page;\r\n            const prev = currentPage > 1\r\n                ? `<div class=\"prev\"><</div>`\r\n                : `<div class=\"prev0\"><</div>`;\r\n            const next = currentPage < countPages\r\n                ? `<div class=\"next\">></div> `\r\n                : `<div class=\"next-last\">></div>`;\r\n            paginator.insertAdjacentHTML('afterbegin', prev);\r\n            paginator.insertAdjacentHTML('beforeend', next);\r\n            const currentPageEl = paginator.querySelector(`#page${currentPage}`);\r\n            if (currentPageEl) {\r\n                currentPageEl.classList.add('active');\r\n            }\r\n            paginator.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement &&\r\n                    (e.target.classList.contains('prev0') ||\r\n                        e.target.classList.contains('next-last'))) {\r\n                    if (e.target.id) {\r\n                        paginator\r\n                            .querySelectorAll('div')\r\n                            .forEach((item) => item.classList.remove('active'));\r\n                        e.target.classList.add('active');\r\n                        const checkedPage = e.target.textContent || '';\r\n                        this.checkPage(checkedPage);\r\n                    }\r\n                    else if (e.target.classList.contains('prev')) {\r\n                        const page = Number(currentPage) - 1;\r\n                        this.checkPage(String(page));\r\n                    }\r\n                    else if (e.target.classList.contains('next')) {\r\n                        const page = Number(currentPage) + 1;\r\n                        this.checkPage(String(page));\r\n                    }\r\n                }\r\n            });\r\n            inputLimit.addEventListener('input', (e) => {\r\n                if (e.target instanceof HTMLInputElement) {\r\n                    this.storage.set('limit', [e.target.value]);\r\n                    const currentFilters = RouterHelper.setFilter(location.hash);\r\n                    const prevHash = location.hash.includes('page')\r\n                        ? `page=${currentFilters.page[0]}&`\r\n                        : '';\r\n                    window.location.hash = `#cart/?${prevHash}limit=${e.target.value}`;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    checkPage(page) {\r\n        const currentFilters = RouterHelper.setFilter(location.hash);\r\n        this.storage.set('page', [page]);\r\n        const prevHash = location.hash.includes('limit')\r\n            ? `limit=${currentFilters.limit[0]}&`\r\n            : '';\r\n        window.location.hash = `#cart/?${prevHash}page=${page}`;\r\n    }\r\n    clearStorage() {\r\n        ['limit', 'page'].forEach((item) => this.storage.drop(item));\r\n    }\r\n}\r\n","export default class PhotoListener {\r\n    listenPhoto() {\r\n        const imgBox = document.querySelector('.img-choose');\r\n        const mainPhoto = document.querySelector('.img-main');\r\n        const imgList = document.querySelectorAll('.img-choose img');\r\n        if (imgBox) {\r\n            imgBox.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLImageElement &&\r\n                    e.target.tagName === 'IMG' &&\r\n                    mainPhoto) {\r\n                    const currentSrc = e.target.src;\r\n                    mainPhoto.src = currentSrc;\r\n                    imgList.forEach((item) => item.classList.remove('active'));\r\n                    e.target.classList.add('active');\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { AbstractView } from '../AbstractView';\r\nimport RouterHelper from '../../utils/RouterHelper';\r\nimport ProductDetailsCard from '../../components/ProductDetailsCard';\r\nimport CartComponent from '../../components/CartComponent';\r\nimport Modal from '../Basket/ModalWindow';\r\nimport PhotoListener from '../../components/Listeners/PhotoListener';\r\nclass ProductDetails extends AbstractView {\r\n    constructor(params) {\r\n        super(params);\r\n        this.params = params;\r\n        this.setTitle('Product Details');\r\n        this.productsView = new ProductDetailsCard();\r\n        this.cart = new CartComponent();\r\n        this.modalWindow = new Modal();\r\n        this.photo = new PhotoListener();\r\n    }\r\n    showIncorrect() {\r\n        const div = document.createElement('div');\r\n        div.classList.add('not-found');\r\n        div.textContent = `Product number\n  ${this.params.split('/').slice(-1).join('')}\n    not found`;\r\n        return div;\r\n    }\r\n    getItem(data) {\r\n        const id = RouterHelper.checkId(this.params);\r\n        if (id) {\r\n            const item = data.products.filter((x) => x.id === id);\r\n            return item.length > 0\r\n                ? this.productsView.draw(item)\r\n                : this.showIncorrect();\r\n        }\r\n        else\r\n            return this.showIncorrect();\r\n    }\r\n    afterRootRender(data) {\r\n        const productItem = this.getItem(data);\r\n        const productItemContainer = document.querySelector('.product-details');\r\n        if (productItemContainer && productItem instanceof HTMLDivElement) {\r\n            productItemContainer.append(productItem);\r\n        }\r\n        this.cart.listenCart(data.products);\r\n        this.modalWindow.listener(data.products);\r\n        this.photo.listenPhoto();\r\n    }\r\n    render(root, data) {\r\n        root.innerHTML = '<div class=\"product-details container\"></div>';\r\n        this.afterRootRender(data);\r\n    }\r\n}\r\nexport { ProductDetails };\r\n","class ProductDetailsCard {\r\n    draw(data) {\r\n        const cartInStorage = localStorage.getItem('cart');\r\n        let shopInfo = {};\r\n        if (cartInStorage) {\r\n            shopInfo = JSON.parse(cartInStorage);\r\n        }\r\n        const inCart = shopInfo && shopInfo.inCart ? shopInfo.inCart : [];\r\n        const cartId = inCart.map((item) => item.id);\r\n        const fragment = document.createDocumentFragment();\r\n        const cardItemTemp = document.querySelector('#productDetails');\r\n        if (data.length === 1 && cardItemTemp instanceof HTMLTemplateElement) {\r\n            const product = data[0];\r\n            const cardClone = cardItemTemp.content.cloneNode(true);\r\n            const crumbEl = cardClone.querySelector('.crumb-category');\r\n            if (crumbEl) {\r\n                crumbEl.textContent = product.category;\r\n                crumbEl.href = `#?/category=${product.category.toLowerCase()}`;\r\n            }\r\n            const brandCrumb = cardClone.querySelector('.crumb-brand');\r\n            if (brandCrumb) {\r\n                brandCrumb.textContent = product.brand;\r\n                brandCrumb.href = `#?/brand=${product.brand.toLowerCase()}`;\r\n            }\r\n            const titleCrumb = cardClone.querySelector('.crumb-title');\r\n            if (titleCrumb) {\r\n                titleCrumb.textContent = product.title;\r\n            }\r\n            const titleEl = cardClone.querySelector('.product-item');\r\n            if (titleEl) {\r\n                titleEl.textContent = product.title;\r\n            }\r\n            const imgEl = cardClone.querySelector('.img-one');\r\n            if (imgEl) {\r\n                imgEl.src = product.thumbnail;\r\n            }\r\n            const imgElTwo = cardClone.querySelector('.img-two');\r\n            if (imgElTwo) {\r\n                imgElTwo.src = product.images[1];\r\n            }\r\n            const imgElThree = cardClone.querySelector('.img-three');\r\n            if (imgElThree) {\r\n                imgElThree.src = product.images[2] || product.images[0];\r\n            }\r\n            const imgMain = cardClone.querySelector('.img-main');\r\n            if (imgMain) {\r\n                imgMain.src = product.thumbnail;\r\n            }\r\n            const descriptionEl = cardClone.querySelector('.product-description-text');\r\n            if (descriptionEl) {\r\n                descriptionEl.textContent = product.description;\r\n            }\r\n            const ratingEl = cardClone.querySelector('.product-rating-value');\r\n            if (ratingEl) {\r\n                ratingEl.textContent = `${product.rating}`;\r\n            }\r\n            const stockEl = cardClone.querySelector('.product-stock-value');\r\n            if (stockEl) {\r\n                stockEl.textContent = `${product.stock}`;\r\n            }\r\n            const brandEl = cardClone.querySelector('.product-brand-value');\r\n            if (brandEl) {\r\n                brandEl.textContent = product.brand;\r\n            }\r\n            const categoryEl = cardClone.querySelector('.product-category-value');\r\n            if (categoryEl) {\r\n                categoryEl.textContent = product.category;\r\n            }\r\n            const priceEl = cardClone.querySelector('.product-price');\r\n            if (priceEl) {\r\n                priceEl.textContent = `Price: $${product.price}.00`;\r\n            }\r\n            const buttonAdd = cardClone.querySelector('.card__buttons-add');\r\n            if (buttonAdd) {\r\n                buttonAdd.id = `${product.id}`;\r\n            }\r\n            if (cartId.includes(product.id) && buttonAdd) {\r\n                buttonAdd.classList.remove('card__buttons-add');\r\n                buttonAdd.classList.add('card__buttons-remove');\r\n                buttonAdd.textContent = 'Remove from cart';\r\n            }\r\n            fragment.append(cardClone);\r\n            return fragment;\r\n        }\r\n        else\r\n            return null;\r\n    }\r\n}\r\nexport default ProductDetailsCard;\r\n","import { AbstractView } from '../AbstractView';\r\nclass Error extends AbstractView {\r\n    constructor(params) {\r\n        super(params);\r\n    }\r\n    afterRootRender() { }\r\n    render(root) {\r\n        const div = document.createElement('div');\r\n        div.classList.add('error-page');\r\n        const errorWrapper = document.createElement('div');\r\n        errorWrapper.textContent = `404`;\r\n        div.append(errorWrapper);\r\n        root.append(div);\r\n    }\r\n}\r\nexport default Error;\r\n","import RouterHelper from '../../utils/RouterHelper';\r\nexport default class Sort {\r\n    constructor() {\r\n        this.currentFilters = RouterHelper.setFilter(location.hash);\r\n    }\r\n    listen(count) {\r\n        this.listenSort();\r\n        this.listenFound(count);\r\n        this.listenView();\r\n    }\r\n    listenSort() {\r\n        const inputSort = document.getElementById('input');\r\n        const currentSort = this.currentFilters['sort']\r\n            ? this.currentFilters['sort'][0]\r\n            : '';\r\n        if (currentSort) {\r\n            const currentSortEl = document.querySelector(`#${currentSort}`);\r\n            currentSortEl ? currentSortEl.classList.add('selected') : null;\r\n            if (inputSort instanceof HTMLInputElement) {\r\n                const selectedSort = document.querySelector(`#${currentSort}.selected`);\r\n                if (selectedSort) {\r\n                    const sortValue = selectedSort.textContent;\r\n                    sortValue ? (inputSort.value = sortValue) : null;\r\n                }\r\n            }\r\n        }\r\n        const selectContainer = document.querySelector('.sort-bar');\r\n        const select = document.querySelector('.select');\r\n        const options = document.querySelectorAll('.sort-bar .option');\r\n        const root = document.querySelector('#root');\r\n        let checkedSort = '';\r\n        if (select && selectContainer && root) {\r\n            select.addEventListener('click', () => {\r\n                selectContainer.classList.add('active');\r\n            });\r\n            selectContainer.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement) {\r\n                    const closestTarget = e.target.closest('div');\r\n                    if (e.target.classList.contains('option') ||\r\n                        (closestTarget && closestTarget.classList.contains('option'))) {\r\n                        const value = e.target.closest('div');\r\n                        options.forEach((option) => {\r\n                            option.classList.remove('selected');\r\n                            if (value && inputSort instanceof HTMLInputElement) {\r\n                                value.classList.add('selected');\r\n                                const sortValue = value.children[0].textContent;\r\n                                sortValue ? (inputSort.value = sortValue) : null;\r\n                            }\r\n                            selectContainer.classList.remove('active');\r\n                        });\r\n                        value ? (checkedSort = value.id) : null;\r\n                        this.changeHash('sort', checkedSort);\r\n                    }\r\n                }\r\n            });\r\n            root.addEventListener('click', (e) => {\r\n                const sortBar = document.querySelector('.sort-bar.active');\r\n                if (e.target instanceof HTMLElement) {\r\n                    const targetClosest = e.target.closest('div');\r\n                    if (targetClosest &&\r\n                        !targetClosest.classList.contains('select') &&\r\n                        sortBar) {\r\n                        selectContainer.classList.remove('active');\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    changeHash(property, value) {\r\n        const currentHash = location.hash;\r\n        if (!currentHash || currentHash.slice(3, 7) === `${property}`) {\r\n            value.length > 0\r\n                ? (window.location.hash = `#?/${property}=${value}`)\r\n                : (window.location.hash = '');\r\n        }\r\n        else {\r\n            const hash = value.length > 0 ? `&${property}=${value}` : '';\r\n            window.location.hash = `${currentHash\r\n                .split('&')\r\n                .filter((item) => item.slice(0, 4) !== `${property}`)\r\n                .join('&')}${hash}`;\r\n        }\r\n    }\r\n    listenFound(count) {\r\n        const statElement = document.querySelector('.stat-count');\r\n        statElement ? (statElement.textContent = `${count}`) : null;\r\n    }\r\n    listenView() {\r\n        const viewMode = document.querySelector('.view-mode');\r\n        const productContainer = document.querySelector('.products-items');\r\n        const currentView = this.currentFilters['view']\r\n            ? this.currentFilters['view'][0]\r\n            : '';\r\n        if (currentView) {\r\n            const viewCurrent = document.querySelector('.view-mode .active');\r\n            viewCurrent ? viewCurrent.classList.remove('active') : null;\r\n            const currentViewEl = document.querySelector(`.${currentView}`);\r\n            currentViewEl ? currentViewEl.classList.add('active') : null;\r\n            if (productContainer) {\r\n                currentView === 'two'\r\n                    ? productContainer.classList.add('big')\r\n                    : productContainer.classList.remove('big');\r\n            }\r\n        }\r\n        viewMode\r\n            ? viewMode.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement) {\r\n                    if (e.target.classList.contains('active')) {\r\n                        this.changeHash('view', e.target.classList[0]);\r\n                    }\r\n                    else {\r\n                        const viewCurrent = document.querySelector('.view-mode .active');\r\n                        viewCurrent ? viewCurrent.classList.remove('active') : null;\r\n                        e.target.classList.add('active');\r\n                        if (productContainer) {\r\n                            e.target.classList.contains('two')\r\n                                ? productContainer.classList.add('big')\r\n                                : productContainer.classList.remove('big');\r\n                        }\r\n                        this.changeHash('view', e.target.classList[0]);\r\n                    }\r\n                }\r\n            })\r\n            : null;\r\n    }\r\n}\r\n","export default class PriceFilterListener {\r\n    changeHash(min, max) {\r\n        const currentHash = location.hash;\r\n        if (!currentHash || currentHash.slice(3, 8) === 'price') {\r\n            window.location.hash = `#?/price=${min.toString()}+${max.toString()}`;\r\n        }\r\n        else {\r\n            const hash = `&price=${min.toString()}+${max.toString()}`;\r\n            window.location.hash = `${currentHash\r\n                .split('&')\r\n                .filter((item) => item.slice(0, 5) !== 'price')\r\n                .join('&')}${hash}`;\r\n        }\r\n        this.validateRange(min, max);\r\n    }\r\n    validateRange(minPrice, maxPrice) {\r\n        const minPriceInput = document.querySelector('.min-price');\r\n        const maxPriceInput = document.querySelector('.max-price');\r\n        const minValue = document.getElementById('min-value-price');\r\n        const maxValue = document.getElementById('max-value-price');\r\n        if (minPriceInput && maxPriceInput && minValue && maxValue) {\r\n            if (minPrice === Infinity || minPrice === -Infinity) {\r\n                minValue.innerHTML = '—';\r\n                maxValue.innerHTML = '—';\r\n            }\r\n            else {\r\n                minValue.innerHTML = '$' + minPrice;\r\n                maxValue.innerHTML = '$' + maxPrice;\r\n            }\r\n            minPriceInput.value = `${minPrice}`;\r\n            maxPriceInput.value = `${maxPrice}`;\r\n        }\r\n    }\r\n    listenPrice(minPrice, maxPrice) {\r\n        this.validateRange(minPrice, maxPrice);\r\n        const inputElements = document.querySelectorAll('#price input[type=\"range\"]');\r\n        inputElements.forEach((input) => {\r\n            input.addEventListener('change', (e) => {\r\n                const minPrice = parseInt(inputElements[0].value) < parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                const maxPrice = parseInt(inputElements[0].value) > parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                this.changeHash(minPrice, maxPrice);\r\n            });\r\n            input.addEventListener('input', (e) => {\r\n                const minPrice = parseInt(inputElements[0].value) < parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                const maxPrice = parseInt(inputElements[0].value) > parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                this.changeHash(minPrice, maxPrice);\r\n            });\r\n        });\r\n    }\r\n}\r\n","export default class Search {\r\n    listenSearch() {\r\n        const inputSearch = document.querySelector('.search__input');\r\n        if (inputSearch) {\r\n            inputSearch.addEventListener('input', (e) => {\r\n                e.preventDefault();\r\n                if (e.target instanceof HTMLInputElement) {\r\n                    this.changeHash(e.target.value.toLowerCase());\r\n                }\r\n            });\r\n        }\r\n    }\r\n    changeHash(text) {\r\n        const currentHash = location.hash;\r\n        if (!currentHash || currentHash.slice(3, 9) === 'search') {\r\n            text.length > 0\r\n                ? (window.location.hash = `#?/search=${text}`)\r\n                : (window.location.hash = '');\r\n        }\r\n        else {\r\n            const hash = text.length > 0 ? `&search=${text}` : '';\r\n            window.location.hash = `${currentHash\r\n                .split('&')\r\n                .filter((item) => item.slice(0, 6) !== 'search')\r\n                .join('&')}${hash}`;\r\n        }\r\n    }\r\n}\r\n","export default class StockFilterListener {\r\n    changeHash(min, max) {\r\n        const currentHash = location.hash;\r\n        if (!currentHash || currentHash.slice(3, 8) === 'stock') {\r\n            window.location.hash = `#?/stock=${min.toString()}+${max.toString()}`;\r\n        }\r\n        else {\r\n            const hash = `&stock=${min.toString()}+${max.toString()}`;\r\n            window.location.hash = `${currentHash\r\n                .split('&')\r\n                .filter((item) => item.slice(0, 5) !== 'stock')\r\n                .join('&')}${hash}`;\r\n        }\r\n        this.validateRange(min, max);\r\n    }\r\n    validateRange(minStock, maxStock) {\r\n        const minStockInput = document.querySelector('.min-stock');\r\n        const maxStockInput = document.querySelector('.max-stock');\r\n        const minValue = document.getElementById('min-value-stock');\r\n        const maxValue = document.getElementById('max-value-stock');\r\n        if (minValue && maxValue && minStockInput && maxStockInput) {\r\n            if (minStock === Infinity || minStock === -Infinity) {\r\n                minValue.innerHTML = '—';\r\n                maxValue.innerHTML = '—';\r\n            }\r\n            else {\r\n                minValue.innerHTML = `${minStock}`;\r\n                maxValue.innerHTML = `${maxStock}`;\r\n            }\r\n            minStockInput.value = `${minStock}`;\r\n            maxStockInput.value = `${maxStock}`;\r\n        }\r\n    }\r\n    listenStock(minStock, maxStock) {\r\n        this.validateRange(minStock, maxStock);\r\n        const inputElements = document.querySelectorAll('#stock input[type=\"range\"]');\r\n        inputElements.forEach((input) => {\r\n            input.addEventListener('change', (e) => {\r\n                const minStock = parseInt(inputElements[0].value) < parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                const maxStock = parseInt(inputElements[0].value) > parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                this.changeHash(minStock, maxStock);\r\n            });\r\n            input.addEventListener('input', (e) => {\r\n                const minStock = parseInt(inputElements[0].value) < parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                const maxStock = parseInt(inputElements[0].value) > parseInt(inputElements[1].value)\r\n                    ? parseInt(inputElements[0].value)\r\n                    : parseInt(inputElements[1].value);\r\n                this.changeHash(minStock, maxStock);\r\n            });\r\n        });\r\n    }\r\n}\r\n","export default class UrlCopyListener {\r\n    listen() {\r\n        const copyBtn = document.querySelector('.copy');\r\n        if (copyBtn) {\r\n            copyBtn.addEventListener('click', () => {\r\n                let tempInput = document.createElement('input');\r\n                copyBtn.textContent = 'Copied!';\r\n                setTimeout(() => {\r\n                    copyBtn.textContent = 'Copy link';\r\n                }, 600);\r\n                tempInput.value = window.location.href;\r\n                if (copyBtn.parentNode && tempInput.parentNode) {\r\n                    copyBtn.parentNode.appendChild(tempInput);\r\n                    tempInput.select();\r\n                    document.execCommand('copy');\r\n                    tempInput.parentNode.removeChild(tempInput);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import ProductCards from '../../components/ProductCards';\r\nimport { AbstractView } from '../AbstractView';\r\nimport RouterHelper from '../../utils/RouterHelper';\r\nimport { homeRoot } from './htmlData';\r\nimport AllListener from '../../components/Listeners/AllListener';\r\nimport CartComponent from '../../components/CartComponent';\r\nclass Home extends AbstractView {\r\n    constructor(params) {\r\n        super(params);\r\n        this.setTitle('Home');\r\n        this.productsView = new ProductCards();\r\n        this.listener = new AllListener();\r\n        this.currentFilters = RouterHelper.setFilter(this.params);\r\n        this.cart = new CartComponent();\r\n        this.minPrice = 0;\r\n        this.maxPrice = 0;\r\n        this.minStock = 0;\r\n        this.maxStock = 0;\r\n    }\r\n    getCategoryProducts(data) {\r\n        let keys = Object.keys(this.currentFilters);\r\n        let productsList = data;\r\n        keys.forEach((key) => {\r\n            productsList = productsList.filter((item) => {\r\n                if (key === 'price' && this.currentFilters[key] != undefined) {\r\n                    this.minPrice = Number(this.currentFilters[key][0]);\r\n                    this.maxPrice = Number(this.currentFilters[key][1]);\r\n                    return (item.price >= Number(this.currentFilters[key][0]) &&\r\n                        item.price <= Number(this.currentFilters[key][1]));\r\n                }\r\n                else if (key === 'stock') {\r\n                    this.minStock = Number(this.currentFilters[key][0]);\r\n                    this.maxStock = Number(this.currentFilters[key][1]);\r\n                    return (item.stock >= Number(this.currentFilters[key][0]) &&\r\n                        item.stock <= Number(this.currentFilters[key][1]));\r\n                }\r\n                else if (key === 'search') {\r\n                    return (item.title\r\n                        .toLowerCase()\r\n                        .includes(String(this.currentFilters[key][0])) ||\r\n                        item.description\r\n                            .toLowerCase()\r\n                            .includes(String(this.currentFilters[key][0])) ||\r\n                        String(item.price) === this.currentFilters[key][0] ||\r\n                        String(item.count) === this.currentFilters[key][0]);\r\n                }\r\n                else if (key === 'sort') {\r\n                    return item;\r\n                }\r\n                else if (key === 'view') {\r\n                    return item;\r\n                }\r\n                else if (key === 'brand') {\r\n                    return this.currentFilters[key].includes(item[key].split(' ').join('-').toLowerCase());\r\n                }\r\n            });\r\n            if (key === 'sort') {\r\n                this.sortData(productsList);\r\n            }\r\n        });\r\n        return productsList;\r\n    }\r\n    afterRootRender(data) {\r\n        this.cart.clearStorage();\r\n        const productsList = this.getCategoryProducts(data.products);\r\n        const productsElement = this.productsView.draw(productsList);\r\n        const productListContainer = document.querySelector('.products-items');\r\n        if (productsElement) {\r\n            if (productListContainer) {\r\n                productListContainer.append(productsElement);\r\n            }\r\n        }\r\n        else {\r\n            const wrapper = document.createElement('div');\r\n            wrapper.classList.add('not__found');\r\n            if (productListContainer) {\r\n                productListContainer.append(wrapper);\r\n            }\r\n        }\r\n        const maxPrice = Math.max(...productsList.map((item) => item.price));\r\n        const minPrice = Math.min(...productsList.map((item) => item.price));\r\n        const maxStock = Math.max(...productsList.map((item) => item.stock));\r\n        const minStock = Math.min(...productsList.map((item) => item.stock));\r\n        this.listener.listenDynamicData(this.minPrice ? this.minPrice : minPrice, this.maxPrice ? this.maxPrice : maxPrice, this.minStock ? this.minStock : minStock, this.maxStock ? this.maxStock : maxStock, productsList.length);\r\n    }\r\n    render(root, data) {\r\n        const categories = new Set(data.products.map((item) => item.category));\r\n        const brands = new Set(data.products.map((item) => item.brand.toLowerCase()));\r\n        root.innerHTML = homeRoot;\r\n        this.renderFilterData(categories, brands);\r\n        this.listener.listenStaticData(data.products);\r\n        this.afterRootRender(data);\r\n    }\r\n    renderFilterData(categories, brands) {\r\n        const categoryContainer = document.querySelector('#category');\r\n        const brandContainer = document.querySelector('#brand');\r\n        categories.forEach((item) => {\r\n            const div = document.createElement('div');\r\n            div.innerHTML = `\n  <input\n    type=\"checkbox\"\n    id=${item.toLowerCase()}\n    name=\"category\"\n    value=${item.toLowerCase()}\n  /><label class=\"filters__box-label\" for=${item.toLowerCase()}\n    >${item[0].toUpperCase() + item.slice(1, item.length).toLowerCase()}</label>`;\r\n            if (categoryContainer) {\r\n                categoryContainer.append(div);\r\n            }\r\n        });\r\n        brands.forEach((item) => {\r\n            const div = document.createElement('div');\r\n            div.innerHTML = `\n  <input\n    type=\"checkbox\"\n    id=${item.toLowerCase()}\n    name=\"brand\"\n    value=${item.split(' ').join('-')}\n  /><label class=\"filters__box-label\" for=${item.toLowerCase()}\n    >${item[0].toUpperCase() + item.slice(1, item.length).toLowerCase()}</label>`;\r\n            if (brandContainer) {\r\n                brandContainer.append(div);\r\n            }\r\n        });\r\n    }\r\n    sortData(data) {\r\n        switch (this.currentFilters['sort'][0]) {\r\n            case 'price-asc':\r\n                data = data.sort((a, b) => Number(a.price) - Number(b.price));\r\n                break;\r\n            case 'price-desc':\r\n                data = data.sort((a, b) => Number(b.price) - Number(a.price));\r\n                break;\r\n            case 'rating-asc':\r\n                data = data.sort((a, b) => Number(a.rating) - Number(b.rating));\r\n                break;\r\n            case 'rating-desc':\r\n                data = data.sort((a, b) => Number(b.rating) - Number(a.rating));\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n}\r\nexport { Home };\r\n","class ProductCards {\r\n    draw(data) {\r\n        const products = data;\r\n        const cartInStorage = localStorage.getItem('cart');\r\n        let shopInfo = {};\r\n        if (cartInStorage) {\r\n            shopInfo = JSON.parse(cartInStorage);\r\n        }\r\n        const inCart = shopInfo && shopInfo.inCart ? shopInfo.inCart : [];\r\n        const cartId = inCart.map((item) => item.id);\r\n        const fragment = document.createDocumentFragment();\r\n        const cardItemTemp = document.querySelector('#cardTemplate');\r\n        if (products.length > 0 && cardItemTemp) {\r\n            products.forEach((item, idx) => {\r\n                const cardClone = cardItemTemp.content.cloneNode(true);\r\n                cardClone.children[0].classList.add(`id-${item.id}`);\r\n                const imgEl = cardClone.querySelector('.card__body-photo');\r\n                if (imgEl) {\r\n                    imgEl.src = item.thumbnail;\r\n                }\r\n                const titleEl = cardClone.querySelector('.card__body-title');\r\n                if (titleEl) {\r\n                    titleEl.textContent = item.title;\r\n                }\r\n                const brandEl = cardClone.querySelector('.list__item-brand');\r\n                if (brandEl) {\r\n                    brandEl.textContent = `${item.brand}`;\r\n                }\r\n                const priceEl = cardClone.querySelector('.list__item-price');\r\n                if (priceEl) {\r\n                    priceEl.textContent = `${item.price} $`;\r\n                }\r\n                const ratingEl = cardClone.querySelector('.list__item-rating');\r\n                if (ratingEl) {\r\n                    ratingEl.innerHTML = `Rating: <strong>${item.rating}</strong>`;\r\n                }\r\n                const buttonAdd = cardClone.querySelector('.card__buttons-add');\r\n                if (buttonAdd) {\r\n                    buttonAdd.id = `${item.id}`;\r\n                }\r\n                const linkEl = cardClone.querySelector('.card__link-details');\r\n                if (linkEl) {\r\n                    linkEl.href = `#product-details/${item.id}`;\r\n                }\r\n                if (cartId.includes(item.id)) {\r\n                    cardClone.children[0].classList.add('in-cart');\r\n                    const button = cardClone.querySelector('.card__buttons-add');\r\n                    if (button) {\r\n                        button.classList.remove('card__buttons-add');\r\n                        button.classList.add('card__buttons-remove');\r\n                        button.textContent = 'Remove from cart';\r\n                    }\r\n                }\r\n                fragment.append(cardClone);\r\n            });\r\n            return fragment;\r\n        }\r\n        else\r\n            return null;\r\n    }\r\n}\r\nexport default ProductCards;\r\n","import CartComponent from '../CartComponent';\r\nimport Sort from '../Sort/Sort';\r\nimport FilterListener from './FilterListener';\r\nimport PriceFilterListener from './PriceFilterSlider';\r\nimport Search from './SearchListener';\r\nimport StockFilterListener from './StockFilterSlider';\r\nimport UrlCopyListener from './UrlCopyListener';\r\nclass AllListener {\r\n    constructor() {\r\n        this.listenDynamicData = (minPrice, maxPrice, minStock, maxStock, count) => {\r\n            this.price.listenPrice(minPrice, maxPrice);\r\n            this.stock.listenStock(minStock, maxStock);\r\n            this.sort.listen(count);\r\n        };\r\n        this.search = new Search();\r\n        this.price = new PriceFilterListener();\r\n        this.stock = new StockFilterListener();\r\n        this.sort = new Sort();\r\n        this.filters = new FilterListener();\r\n        this.cart = new CartComponent();\r\n        this.copyUrl = new UrlCopyListener();\r\n    }\r\n    listenStaticData(data) {\r\n        this.filters.listen();\r\n        this.search.listenSearch();\r\n        this.cart.listenCart(data);\r\n        this.copyUrl.listen();\r\n        if (location.hash.length < 1) {\r\n            this.clearFilters();\r\n        }\r\n    }\r\n    clearFilters() {\r\n        this.filters.clearFilters();\r\n    }\r\n}\r\nexport default AllListener;\r\n","import Storage from '../../utils/Storage';\r\nimport RouterHelper from '../../utils/RouterHelper';\r\nclass FilterListener {\r\n    constructor() {\r\n        this.listen = () => {\r\n            this.addChecked();\r\n            const filtersBox = document.querySelector('.filters__box');\r\n            if (filtersBox) {\r\n                filtersBox.addEventListener('change', (e) => {\r\n                    if (e.target instanceof HTMLInputElement) {\r\n                        if (this.filters.includes(e.target.name)) {\r\n                            const allCheckedInputs = document.querySelectorAll(`[name=${e.target.name}]:checked`);\r\n                            const checkedValues = [];\r\n                            allCheckedInputs.forEach((name) => {\r\n                                checkedValues.push(name.value);\r\n                            });\r\n                            this.storage.set(`${e.target.name}`, checkedValues);\r\n                            const currentFilters = this.storage.getAll();\r\n                            let hash = `#?/`;\r\n                            const currentHash = window.location.hash;\r\n                            const hashToAdd = currentHash\r\n                                .slice(3, currentHash.length)\r\n                                .split('&')\r\n                                .filter((item) => item.slice(0, 5) === 'price' || item.slice(0, 5) === 'stock');\r\n                            this.filters.forEach((item, i) => {\r\n                                if (currentFilters[item] && currentFilters[item].length > 0) {\r\n                                    hash += `${i > 0 && hash.length > 3 ? '&' : ''}${item}=${currentFilters[item].join('+')}`;\r\n                                }\r\n                            });\r\n                            hashToAdd.forEach((item) => (hash += `&${item}`));\r\n                            hash[3] === '&' ? (hash = hash.replace('&', '')) : hash;\r\n                            window.location.hash = hash.length === 3 ? '' : hash;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            const buttonRemove = document.querySelector('#remove');\r\n            if (buttonRemove) {\r\n                buttonRemove.addEventListener('click', (e) => {\r\n                    if (e.target instanceof HTMLElement) {\r\n                        const closestEl = e.target.closest('div');\r\n                        if (closestEl && closestEl.id === 'remove') {\r\n                            this.clearFilters();\r\n                            window.location.hash = '';\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        this.addChecked = () => {\r\n            let currentFilters = RouterHelper.setFilter(location.hash);\r\n            this.filters.forEach((filter) => {\r\n                if (currentFilters[filter]) {\r\n                    const inputs = document.querySelectorAll(`[name=${filter}]`);\r\n                    inputs.forEach((input) => {\r\n                        if (currentFilters[filter].includes(input.value)) {\r\n                            input.checked = true;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        };\r\n        this.filters = [\r\n            \"category\" /* Filters.Category */,\r\n            \"brand\" /* Filters.Brand */,\r\n            \"price\" /* Filters.Price */,\r\n            \"stock\" /* Filters.Stock */,\r\n        ];\r\n        this.storage = new Storage('shop');\r\n    }\r\n    clearFilters() {\r\n        this.filters.forEach((filter) => this.storage.drop(filter));\r\n        const allCheckedInputs = document.querySelectorAll(`[type=\"checkbox\"]:checked`);\r\n        allCheckedInputs.forEach((input) => (input.checked = false));\r\n    }\r\n}\r\nexport default FilterListener;\r\n","export const homeRoot = `<section class=\"products container\">\n<aside class=\"products__filter\">\n  <div class=\"filters__box\">\n  <div>\n   <h3>Category</h3>\n    <div id=\"category\">\n       </div>\n    </div>\n    <div>\n      <h3>Brand</h3>\n       <div id=\"brand\">\n        </div>\n    </div>\n      <div id=\"price\">\n      <h3>Price</h3>\n      <div class=\"price__content\">\n        <div class=\"value-field\">\n          <label class=\"price__content-label\">Min:</label>\n          <p id=\"min-value-price\">$0</p>\n        </div>\n        <div class=\"value-field\">\n          <label class=\"price__content-label\">Max:</label>\n          <p id=\"max-value-price\">$1749</p>\n        </div>\n      </div>\n      <div class=\"range-slider\">\n        <input\n          type=\"range\"\n          class=\"min-price\"\n          value=\"0\"\n          min=\"0\"\n          max=\"1749\"\n          step=\"1\"\n        />\n        <input type=\"range\" class=\"max-price\" value=\"0 min=\"0\" max=\"1749\"\n        step=\"1\">\n      </div>\n    </div>\n    <div id=\"stock\">\n      <h3>Stock</h3>\n      <div class=\"stock__content\">\n        <div class=\"value-field\">\n          <label class=\"stock__content-label\">Min:</label>\n          <p id=\"min-value-stock\">0</p>\n        </div>\n\n        <div class=\"value-field\">\n          <label class=\"stock__content-label\">Max:</label>\n          <p id=\"max-value-stock\">0</p>\n        </div>\n      </div>\n      <div class=\"range-slider\">\n        <input\n          type=\"range\"\n          class=\"min-stock\"\n          value=\"0\"\n          min=\"0\"\n          max=\"150\"\n          step=\"1\"\n        />\n        <input type=\"range\" class=\"max-stock\" value=\"0 min=\"0\" max=\"150\"\n        step=\"1\">\n      </div>\n      <div id=\"remove\">\n        <button class=\"filters__box-remove\">Remove all filters</button>\n      </div>\n      <div class=\"copy__wrapper\">\n        <button class=\"copy\">Copy link</button>\n      </div>\n    </div>\n  </div>\n</aside>\n<div class=\"products__wrapper\">\n<div class=\"sort-products\">  \n<div class=\"sort-bar\">\n<div class=\"select\">\n<input type=\"select-text\" id=\"input\" readonly placeholder=\"Sort options\">\n</div>\n<div class=\"option-container\">\n<div class=\"option\" id = \"price-ASC\">\n    <label > Sort by price ASC </label>\n</div>\n<div class=\"option\" id = \"price-DESC\">\n    <label>Sort by price DESC</label>\n</div>\n<div class=\"option\" id = \"rating-ASC\">\n    <label>Sort by rating ASC</label>\n</div>\n<div class=\"option\" id = \"rating-DESC\">\n    <label>Sort by rating DESC</label>\n</div>\n\n</div>\n</div>\n\n<div class=\"stat\"><p>Found:&nbsp;&nbsp;</p><p class=\"stat-count\">4</p></div>\n<div class=\"search-bar\">\n<input class=\"search__input\" type=\"search\" placeholder=\"Search..\" />\n</div>\n<div class=\"view-mode\">\n<div class=\"three active\"></div><div class=\"two\"></div></div>\n</div>\n <div class=\"products-items\"></div>\n</div>\n</section>\n`;\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nexport default class ProductsData {\r\n    static getData(url) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const response = yield fetch(url);\r\n            const data = yield response.json();\r\n            console.log(data);\r\n            return data;\r\n        });\r\n    }\r\n}\r\n","export default class Header {\r\n    static listener() {\r\n        const header = document.querySelector('header');\r\n        header\r\n            ? header.addEventListener('click', (e) => {\r\n                if (e.target instanceof HTMLElement) {\r\n                    if (e.target.classList.contains('basket')) {\r\n                        window.location.hash = '#cart';\r\n                    }\r\n                    if (e.target.classList.contains('logo')) {\r\n                        window.location.hash = '';\r\n                    }\r\n                }\r\n            })\r\n            : null;\r\n    }\r\n}\r\n","import App from './components/App';\r\nimport './styles/main.scss';\r\nconst app = new App();\r\napp.start();\r\n","import Router from '../utils/Router';\r\nimport Header from '../components/Header';\r\nexport default class App {\r\n    start() {\r\n        const routing = new Router('https://dummyjson.com/products?limit=100');\r\n        window.addEventListener('popstate', routing.router);\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            document.body.addEventListener('click', (e) => {\r\n                const { target } = e;\r\n                if (target instanceof HTMLLinkElement &&\r\n                    target.matches('[data-link]')) {\r\n                    e.preventDefault();\r\n                    routing.navigateTo(target.href);\r\n                }\r\n            });\r\n            routing.router();\r\n            Header.listener();\r\n        });\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { ProductDetails } from '../pages/ProductDetails/ProductDetails';\r\nimport Error from '../pages/404/404';\r\nimport { Cart } from '../pages/Basket/Cart';\r\nimport { Home } from '../pages/Home/Home';\r\nimport ProductsData from './ProductsData';\r\nclass Router {\r\n    constructor(url) {\r\n        this.url = url;\r\n        this.root = document.querySelector('#root');\r\n    }\r\n    router() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const routes = [\r\n                { path: '/', view: Home },\r\n                { path: '#product-details', view: ProductDetails },\r\n                { path: '#?', view: Home },\r\n                { path: '#cart', view: Cart },\r\n            ];\r\n            const data = ProductsData.getData(this.url);\r\n            const currentProducts = yield data;\r\n            const hash = location.hash.toLocaleLowerCase() || '/';\r\n            const isAppRoute = () => {\r\n                if (hash === '/') {\r\n                    return 0;\r\n                }\r\n                else {\r\n                    const hashStart = hash.split('/').slice(0, 1).join('');\r\n                    let matchInd;\r\n                    routes.forEach((route, i) => {\r\n                        if (route.path.startsWith(hashStart)) {\r\n                            matchInd = i;\r\n                        }\r\n                    });\r\n                    return matchInd;\r\n                }\r\n            };\r\n            const pathInd = isAppRoute();\r\n            const productList = document.querySelector('.products-items');\r\n            const view = pathInd !== undefined && pathInd >= 0\r\n                ? new routes[pathInd].view(hash)\r\n                : new Error(hash);\r\n            if ((pathInd === 0 || pathInd === 2) &&\r\n                hash.length > 3 &&\r\n                productList &&\r\n                currentProducts.products.length > 0) {\r\n                productList.innerHTML = '';\r\n                view.afterRootRender(currentProducts);\r\n            }\r\n            else {\r\n                if (this.root && currentProducts.products.length > 0) {\r\n                    this.root.innerHTML = '';\r\n                    view.render(this.root, currentProducts);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    navigateTo(url) {\r\n        history.pushState(null, '', url);\r\n        this.router();\r\n    }\r\n}\r\nexport default Router;\r\n"],"names":["AbstractView","constructor","params","this","setTitle","title","document","render","root","data","RouterHelper","checkId","path","pathArray","split","length","Number","slice","join","setFilter","includes","filtersString","replace","filters","forEach","elem","key","valuesString","values","Validator","static","name","nameArray","filter","part","number","String","test","address","addressArray","email","toLowerCase","cardNumber","isCreditCardNumber","validThru","validThruArray","cvv","ccn","cnnArr","toString","n","map","item","i","itemNumber","reduce","prev","curr","Modal","getElementById","listener","modal","querySelector","addEventListener","location","hash","buyFromProductDetails","createModal","form","inputName","inputNumber","inputAddress","inputEmail","inputValidThru","inputCvv","event","preventDefault","isValidForm","e","validName","currentValue","target","value","validPhone","validAddress","validEmail","validCardNumber","cardNumberHandler","validThruHandler","cvvHandler","validCvv","isValidValidThru","classList","remove","add","isValidCvv","window","currentTarget","className","createElement","innerHTML","after","inputCardNumber","isValid","querySelectorAll","localStorage","clear","modalContent","style","top","InputEvent","bankCardImg","src","input","isValidEmail","isValidPhone","isValidName","isValidAddress","isValidCardNumber","currentId","itemsInCart","JSON","parse","getItem","inCart","id","previousProducts","currentProduct","find","count","push","newData","stringify","setItem","promocodes","rss","epam","develop","PromoCode","couponInput","appliedPromo","Set","createList","promo","createPromo","deletePromo","wrapper","promoElement","applyPromoBtn","textContent","array","append","findCoupon","startsWith","closest","appliedCoupons","promos","size","Array","from","coupon","drop","delete","newArray","setNewPrice","discountPrice","buyTotalAmount","percentAmount","total","toFixed","Cart","super","cart","CartComponent","fillCartList","currentCart","getCart","orderEl","pagination","limit","limitValue","currentPage","start","lastIndex","end","dataToShow","setCurrentAmountHeader","cartWrapper","content","thumbnail","category","toUpperCase","description","rating","price","stock","a","b","cartSection","textForEmpty","listenCount","listenCardDetails","afterRootRender","modalWindow","products","store","obj","getAll","set","get","dropAll","storage","cartData","listenCart","allData","allProducts","productDetail","currentContent","HTMLElement","checkedProduct","toggleButton","HTMLButtonElement","cartList","contains","closestEl","prod","view","totalAmount","getTotalAmount","amountEl","setProductsInCart","cartHeader","basketAmount","productInCart","display","productsList","text","addedItem","toggle","currentLimit","limitElement","inputLimit","paginator","countItems","itemsOnPage","countPages","Math","ceil","page","next","insertAdjacentHTML","currentPageEl","checkedPage","checkPage","HTMLInputElement","currentFilters","prevHash","clearStorage","PhotoListener","listenPhoto","imgBox","mainPhoto","imgList","HTMLImageElement","tagName","currentSrc","ProductDetails","productsView","draw","cartInStorage","shopInfo","cartId","fragment","createDocumentFragment","cardItemTemp","HTMLTemplateElement","product","cardClone","cloneNode","crumbEl","href","brandCrumb","brand","titleCrumb","titleEl","imgEl","imgElTwo","images","imgElThree","imgMain","descriptionEl","ratingEl","stockEl","brandEl","categoryEl","priceEl","buttonAdd","photo","showIncorrect","div","x","productItem","productItemContainer","HTMLDivElement","errorWrapper","Sort","listen","listenSort","listenFound","listenView","inputSort","currentSort","currentSortEl","selectedSort","sortValue","selectContainer","select","options","checkedSort","closestTarget","option","children","changeHash","sortBar","targetClosest","property","currentHash","statElement","viewMode","productContainer","currentView","viewCurrent","currentViewEl","PriceFilterListener","min","max","validateRange","minPrice","maxPrice","minPriceInput","maxPriceInput","minValue","maxValue","Infinity","listenPrice","inputElements","parseInt","Search","listenSearch","inputSearch","StockFilterListener","minStock","maxStock","minStockInput","maxStockInput","listenStock","UrlCopyListener","copyBtn","tempInput","setTimeout","parentNode","appendChild","execCommand","removeChild","Home","idx","linkEl","button","listenDynamicData","sort","search","addChecked","filtersBox","allCheckedInputs","checkedValues","hashToAdd","buttonRemove","clearFilters","checked","copyUrl","listenStaticData","getCategoryProducts","keys","Object","undefined","sortData","productsElement","productListContainer","categories","brands","renderFilterData","categoryContainer","brandContainer","ProductsData","url","thisArg","_arguments","generator","response","fetch","json","console","log","P","Promise","resolve","reject","fulfilled","step","rejected","result","done","then","apply","Header","header","routing","router","routes","getData","currentProducts","toLocaleLowerCase","pathInd","hashStart","matchInd","route","isAppRoute","productList","navigateTo","history","pushState","body","HTMLLinkElement","matches"],"sourceRoot":""}